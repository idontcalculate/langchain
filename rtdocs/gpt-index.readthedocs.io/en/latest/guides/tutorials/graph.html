<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Notebooks" href="../notebooks.html" /><link rel="prev" title="A Guide to Extracting Terms and Definitions" href="terms_definitions_tutorial.html" />
        <link rel="canonical" href="https://gpt-index.readthedocs.io/en/latest/guides/tutorials/graph.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>A Guide to Creating a Unified Query Framework over your Indexes - LlamaIndex</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="/_/static/css/badge_only.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style>
<!-- RTD Extra Head -->

<link rel="stylesheet" href="/_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2023-04-17T08:05:39Z", "builder": "sphinx", "canonical_url": null, "commit": "5b8f37f3", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "guides/tutorials/graph", "programming_language": "words", "project": "gpt-index", "proxied_api_host": "/_", "source_suffix": ".md", "subprojects": {}, "theme": "furo", "user_analytics_code": "", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">LlamaIndex</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">LlamaIndex</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installation.html">Installation and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/starter_example.html">Starter Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../primer.html">A Primer to using LlamaIndex</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../primer/usage_pattern.html">LlamaIndex Usage Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../primer/index_guide.html">How Each Index Works</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../tutorials.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="building_a_chatbot.html">💬🤖 How to Build a Chatbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="fullstack_app_guide.html">A Guide to Building a Full-Stack Web App with LLamaIndex</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_guide.html">A Guide to LlamaIndex + Structured Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="terms_definitions_tutorial.html">A Guide to Extracting Terms and Definitions</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">A Guide to Creating a Unified Query Framework over your Indexes</a></li>
<li class="toctree-l2"><a class="reference external" href="https://medium.com/@jerryjliu98/how-unstructured-and-llamaindex-can-help-bring-the-power-of-llms-to-your-own-data-3657d063e30d">SEC 10k Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks.html">Notebooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../use_cases/queries.html">Queries over your Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../use_cases/apps.html">Integrations into LLM Applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Key Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/data_connectors.html">Data Connectors (LlamaHub 🦙)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to/indices.html">Index Structures</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../primer/index_guide.html">How Each Index Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/index_structs/update.html">Updating an Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/index_structs/composability.html">Composability</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to/query_interface.html">Query Interface</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../primer/usage_pattern.html">LlamaIndex Usage Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/index_structs/composability.html">Composability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/query/query_transformations.html">Query Transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/query/node_postprocessor.html">Node Postprocessor</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to/customization.html">Customization</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/customization/custom_llms.html">Defining LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/customization/custom_prompts.html">Defining Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/customization/embeddings.html">Embedding support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to/analysis.html">Analysis and Optimization</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/analysis/cost_analysis.html">Cost Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/analysis/playground.html">Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/analysis/optimizers.html">Optimizers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/output_parsing.html">Output Parsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/evaluation/evaluation.html">🔬 Evaluation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to/integrations.html">Integrations</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/integrations/vector_stores.html">Using Vector Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/integrations/chatgpt_plugins.html">ChatGPT Plugin Integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/integrations/using_with_langchain.html">Using with Langchain 🦜🔗</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/storage.html">Document Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/indices.html">Indices</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/list.html">List Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/table.html">Table Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/tree.html">Tree Index</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/indices/vector_store.html">Vector Store Index</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/indices/vector_stores/stores.html">Vector Stores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/indices/vector_stores/base_index.html">Base Vector Index class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/struct_store.html">Structured Store Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/kg.html">Knowledge Graph Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/empty.html">Empty Index</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/query.html">Querying an Index</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/list_query.html">Querying a List Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/table_query.html">Querying a Keyword Table Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/tree_query.html">Querying a Tree Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/vector_store_query.html">Querying a Vector Store Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/struct_store_query.html">Querying a Structured Store Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/kg_query.html">Querying a Knowledge Graph Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/empty_query.html">Querying an Empty Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/indices/composability_query.html">Composable Queries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/node.html">Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/node_postprocessor.html">Node Postprocessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/docstore.html">Docstore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/composability.html">Composability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/readers.html">Data Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/prompts.html">Prompt Templates</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/service_context.html">Service Context</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/service_context/embeddings.html">Embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/service_context/llm_predictor.html">LLMPredictor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/service_context/prompt_helper.html">PromptHelper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/service_context/llama_logger.html">Llama Logger 🪵</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/struct_store.html">Structured Index Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/response.html">Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/playground.html">Playground</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/node_parser.html">Node Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/example_notebooks.html">Example Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/langchain_integrations/base.html">Langchain Integrations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gallery/app_showcase.html">😎 App Showcase</a></li>
</ul>

</div>

<div
  id="furo-sidebar-ad-placement"
  class="flat"
  data-ea-publisher="readthedocs"
  data-ea-type="readthedocs-sidebar"
  data-ea-manual="true"
></div>
</div>

<div id="furo-readthedocs-versions" class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions" tabindex="0">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book">&nbsp;</span>
    v: latest
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="/en/latest/">latest</a></dd>
      
        <dd><a href="/en/stable/">stable</a></dd>
      
    </dl>
    <dl>
      <dt>Downloads</dt>
      
        <dd><a href="//gpt-index.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
      
        <dd><a href="//gpt-index.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
      
        <dd><a href="//gpt-index.readthedocs.io/_/downloads/en/latest/epub/">epub</a></dd>
      
    </dl>
    <dl>
      
      <dt>On Read the Docs</dt>
        <dd>
          <a href="//readthedocs.org/projects/gpt-index/?fromdocs=gpt-index">Project Home</a>
        </dd>
        <dd>
          <a href="//readthedocs.org/builds/gpt-index/?fromdocs=gpt-index">Builds</a>
        </dd>
    </dl>
  </div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

  
  <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/jerryjliu/gpt_index/edit/main/docs/guides/tutorials/graph.md" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="a-guide-to-creating-a-unified-query-framework-over-your-indexes">
<h1>A Guide to Creating a Unified Query Framework over your Indexes<a class="headerlink" href="#a-guide-to-creating-a-unified-query-framework-over-your-indexes" title="Permalink to this heading"></a></h1>
<p>LlamaIndex offers a variety of different <a class="reference internal" href="#/docs/use_cases/queries.md"><span class="xref myst">query use cases</span></a>.</p>
<p>For simple queries, we may want to use a single index data structure, such as a <code class="docutils literal notranslate"><span class="pre">GPTSimpleVectorIndex</span></code> for semantic search, or <code class="docutils literal notranslate"><span class="pre">GPTListIndex</span></code> for summarization.</p>
<p>For more complex queries, we may want to use a composable graph.</p>
<p>But how do we integrate indexes and graphs into our LLM application? Different indexes and graphs may be better suited for different types of queries that you may want to run.</p>
<p>In this guide, we show how you can unify the diverse use cases of different index/graph structures under a <strong>single</strong> query framework.</p>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h2>
<p>In this example, we will analyze Wikipedia articles of different cities: Boston, Seattle, San Francisco, and more.</p>
<p>The below code snippet downloads the relevant data into files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">wiki_titles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Toronto&quot;</span><span class="p">,</span> <span class="s2">&quot;Seattle&quot;</span><span class="p">,</span> <span class="s2">&quot;Chicago&quot;</span><span class="p">,</span> <span class="s2">&quot;Boston&quot;</span><span class="p">,</span> <span class="s2">&quot;Houston&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">wiki_titles</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s1">&#39;https://en.wikipedia.org/w/api.php&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;query&#39;</span><span class="p">,</span>
            <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
            <span class="s1">&#39;titles&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
            <span class="s1">&#39;prop&#39;</span><span class="p">:</span> <span class="s1">&#39;extracts&#39;</span><span class="p">,</span>
            <span class="c1"># &#39;exintro&#39;: True,</span>
            <span class="s1">&#39;explaintext&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">page</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">][</span><span class="s1">&#39;pages&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
    <span class="n">wiki_text</span> <span class="o">=</span> <span class="n">page</span><span class="p">[</span><span class="s1">&#39;extract&#39;</span><span class="p">]</span>

    <span class="n">data_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">Path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">data_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">wiki_text</span><span class="p">)</span>

</pre></div>
</div>
<p>The next snippet loads all files into Document objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load all wiki documents</span>
<span class="n">city_docs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">wiki_title</span> <span class="ow">in</span> <span class="n">wiki_titles</span><span class="p">:</span>
    <span class="n">city_docs</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">]</span> <span class="o">=</span> <span class="n">SimpleDirectoryReader</span><span class="p">(</span><span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;data/</span><span class="si">{</span><span class="n">wiki_title</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>

</pre></div>
</div>
</div>
<div class="section" id="defining-the-set-of-indexes">
<h2>Defining the Set of Indexes<a class="headerlink" href="#defining-the-set-of-indexes" title="Permalink to this heading"></a></h2>
<p>We will now define a set of indexes and graphs over your data. You can think of each index/graph as a lightweight structure
that solves a distinct use case.</p>
<p>We will first define a vector index over the documents of each city.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gpt_index</span> <span class="kn">import</span> <span class="n">GPTSimpleVectorIndex</span><span class="p">,</span> <span class="n">ServiceContext</span>
<span class="kn">from</span> <span class="nn">langchain.llms.openai</span> <span class="kn">import</span> <span class="n">OpenAIChat</span>

<span class="c1"># set service context</span>
<span class="n">llm_predictor_gpt4</span> <span class="o">=</span> <span class="n">LLMPredictor</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">OpenAIChat</span><span class="p">(</span><span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;gpt-4&quot;</span><span class="p">))</span>
<span class="n">service_context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span>
    <span class="n">llm_predictor</span><span class="o">=</span><span class="n">llm_predictor_gpt4</span><span class="p">,</span> <span class="n">chunk_size_limit</span><span class="o">=</span><span class="mi">1024</span>
<span class="p">)</span>

<span class="c1"># Build city document index</span>
<span class="n">vector_indices</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">wiki_title</span> <span class="ow">in</span> <span class="n">wiki_titles</span><span class="p">:</span>
    <span class="c1"># build vector index</span>
    <span class="n">vector_indices</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">]</span> <span class="o">=</span> <span class="n">GPTSimpleVectorIndex</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span>
        <span class="n">city_docs</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">],</span> <span class="n">service_context</span><span class="o">=</span><span class="n">service_context</span>
    <span class="p">)</span>
    <span class="c1"># set id for vector index</span>
    <span class="n">vector_indices</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">]</span><span class="o">.</span><span class="n">index_struct</span><span class="o">.</span><span class="n">index_id</span> <span class="o">=</span> <span class="n">wiki_title</span>
    <span class="n">vector_indices</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">]</span><span class="o">.</span><span class="n">save_to_disk</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;index_</span><span class="si">{</span><span class="n">wiki_title</span><span class="si">}</span><span class="s1">.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Querying a vector index lets us easily perform semantic search over a given city’s documents.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">vector_indices</span><span class="p">[</span><span class="s2">&quot;Toronto&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;What are the sports teams in Toronto?&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

</pre></div>
</div>
<p>Example response:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The sports teams in Toronto are the Toronto Maple Leafs (NHL), Toronto Blue Jays (MLB), Toronto Raptors (NBA), Toronto Argonauts (CFL), Toronto FC (MLS), Toronto Rock (NLL), Toronto Wolfpack (RFL), and Toronto Rush (NARL).
</pre></div>
</div>
</div>
<div class="section" id="defining-a-graph-for-compare-contrast-queries">
<h2>Defining a Graph for Compare/Contrast Queries<a class="headerlink" href="#defining-a-graph-for-compare-contrast-queries" title="Permalink to this heading"></a></h2>
<p>We will now define a composed graph in order to run <strong>compare/contrast</strong> queries (see <a class="reference internal" href="#/docs/use_cases/queries.md"><span class="xref myst">use cases doc</span></a>).
This graph contains a keyword table composed on top of existing vector indexes.</p>
<p>To do this, we first want to set the “summary text” for each vector index.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">index_summaries</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">wiki_title</span> <span class="ow">in</span> <span class="n">wiki_titles</span><span class="p">:</span>
    <span class="c1"># set summary text for city</span>
    <span class="n">index_summaries</span><span class="p">[</span><span class="n">wiki_title</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;This content contains Wikipedia articles about </span><span class="si">{</span><span class="n">wiki_title</span><span class="si">}</span><span class="s2">. &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;Use this index if you need to lookup specific facts about </span><span class="si">{</span><span class="n">wiki_title</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="s2">&quot;Do not use this index if you want to analyze multiple cities.&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Next, we compose a keyword table on top of these vector indexes, with these indexes and summaries, in order to build the graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gpt_index.indices.composability</span> <span class="kn">import</span> <span class="n">ComposableGraph</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">ComposableGraph</span><span class="o">.</span><span class="n">from_indices</span><span class="p">(</span>
    <span class="n">GPTSimpleKeywordTableIndex</span><span class="p">,</span>
    <span class="p">[</span><span class="n">index</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">vector_indices</span><span class="o">.</span><span class="n">items</span><span class="p">()],</span> 
    <span class="p">[</span><span class="n">summary</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">summary</span> <span class="ow">in</span> <span class="n">index_summaries</span><span class="o">.</span><span class="n">items</span><span class="p">()],</span>
    <span class="n">max_keywords_per_chunk</span><span class="o">=</span><span class="mi">50</span>
<span class="p">)</span>

<span class="c1"># get root index</span>
<span class="n">root_index</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">get_index</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">index_struct</span><span class="o">.</span><span class="n">root_id</span><span class="p">,</span> <span class="n">GPTSimpleKeywordTableIndex</span><span class="p">)</span>
<span class="c1"># set id of root index</span>
<span class="n">root_index</span><span class="o">.</span><span class="n">index_struct</span><span class="o">.</span><span class="n">index_id</span> <span class="o">=</span> <span class="s2">&quot;compare_contrast&quot;</span>
<span class="n">root_summary</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;This index contains Wikipedia articles about multiple cities. &quot;</span>
    <span class="s2">&quot;Use this index if you want to compare multiple cities. &quot;</span>
<span class="p">)</span>

</pre></div>
</div>
<p>Querying this graph (with a query transform module), allows us to easily compare/contrast between different cities. An example
is shown below - we define query_configs and send a query through this graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define decompose_transform</span>
<span class="kn">from</span> <span class="nn">gpt_index.indices.query.query_transform.base</span> <span class="kn">import</span> <span class="n">DecomposeQueryTransform</span>
<span class="n">decompose_transform</span> <span class="o">=</span> <span class="n">DecomposeQueryTransform</span><span class="p">(</span>
    <span class="n">llm_predictor_chatgpt</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="c1"># set query config</span>
<span class="n">query_configs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;index_struct_type&quot;</span><span class="p">:</span> <span class="s2">&quot;simple_dict&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;similarity_top_k&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="c1"># NOTE: set query transform for subindices</span>
        <span class="s2">&quot;query_transform&quot;</span><span class="p">:</span> <span class="n">decompose_transform</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;index_struct_type&quot;</span><span class="p">:</span> <span class="s2">&quot;keyword_table&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;response_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;tree_summarize&quot;</span><span class="p">,</span>
            <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="c1"># query the graph</span>
<span class="n">query_str</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Compare and contrast the arts and culture of Houston and Boston. &quot;</span>
<span class="p">)</span>
<span class="n">response_chatgpt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
    <span class="n">query_str</span><span class="p">,</span> 
    <span class="n">query_configs</span><span class="o">=</span><span class="n">query_configs</span><span class="p">,</span> 
    <span class="n">service_context</span><span class="o">=</span><span class="n">service_context</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-the-unified-query-interface">
<h2>Defining the Unified Query Interface<a class="headerlink" href="#defining-the-unified-query-interface" title="Permalink to this heading"></a></h2>
<p>Now that we’ve defined the set of indexes/graphs, we want to build an <strong>outer abstraction</strong> layer that provides a unified query interface
to our data structures. This means that during query-time, we can query this outer abstraction layer and trust that the right index/graph
will be used for the job.</p>
<p>There are a few ways to do this, both within our framework as well as outside of it!</p>
<ul class="simple">
<li><p>Compose a “router” on top of your existing indexes/graphs (basically expanding the graph!)</p>
<ul>
<li><p>There are a few different “router” modules we can use, such as our tree index or vector index.</p></li>
</ul>
</li>
<li><p>Define each index/graph as a Tool within an agent framework (e.g. LangChain).</p></li>
</ul>
<p>For the purposes of this tutorial, we follow the former approach. If you want to take a look at how the latter approach works,
take a look at <a class="reference internal" href="building_a_chatbot.html"><span class="std std-doc">our example tutorial here</span></a>.</p>
<p>We define this graph using a tree index. The tree index serves as a “router”. A router is at the core of defining a unified
query interface. This allows us to “route” any query to the set of indexes/graphs that you have defined under the hood.</p>
<p>We compose the tree index over all the vector indexes + the graph (used for compare/contrast queries).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gpt_index</span> <span class="kn">import</span> <span class="n">GPTTreeIndex</span>

<span class="c1"># num children is num vector indexes + graph</span>
<span class="n">num_children</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector_indices</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">outer_graph</span> <span class="o">=</span> <span class="n">ComposableGraph</span><span class="o">.</span><span class="n">from_indices</span><span class="p">(</span>
    <span class="n">GPTTreeIndex</span><span class="p">,</span>
    <span class="p">[</span><span class="n">index</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">vector_indices</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span> <span class="o">+</span> <span class="p">[</span><span class="n">root_index</span><span class="p">],</span> 
    <span class="p">[</span><span class="n">summary</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">summary</span> <span class="ow">in</span> <span class="n">index_summaries</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span> <span class="o">+</span> <span class="p">[</span><span class="n">root_summary</span><span class="p">],</span>
    <span class="n">num_children</span><span class="o">=</span><span class="n">num_children</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="querying-our-unified-interface">
<h2>Querying our Unified Interface<a class="headerlink" href="#querying-our-unified-interface" title="Permalink to this heading"></a></h2>
<p>The advantage of a unified query interface is that it can now handle different types of queries.</p>
<p>It can now handle queries about specific cities (by routing to the specific city vector index),
and also compare/contrast different cities.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set query config</span>
<span class="n">query_configs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;index_struct_type&quot;</span><span class="p">:</span> <span class="s2">&quot;keyword_table&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;response_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;tree_summarize&quot;</span><span class="p">,</span>
            <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;index_struct_type&quot;</span><span class="p">:</span> <span class="s2">&quot;tree&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        
    <span class="p">}</span>
<span class="p">]</span>
<span class="k">for</span> <span class="n">wiki_title</span> <span class="ow">in</span> <span class="n">wiki_titles</span><span class="p">:</span>
    <span class="n">query_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;index_struct_id&quot;</span><span class="p">:</span> <span class="n">wiki_title</span><span class="p">,</span>
        <span class="s2">&quot;index_struct_type&quot;</span><span class="p">:</span> <span class="s2">&quot;simple_dict&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;similarity_top_k&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="c1"># NOTE: set query transform for subindices</span>
        <span class="s2">&quot;query_transform&quot;</span><span class="p">:</span> <span class="n">decompose_transform</span>
    <span class="p">}</span>
    <span class="n">query_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">query_config</span><span class="p">)</span>

</pre></div>
</div>
<p>Let’s take a look at a few examples!</p>
<p><strong>Asking a Compare/Contrast Question</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ask a compare/contrast question </span>
<span class="n">response</span> <span class="o">=</span> <span class="n">outer_graph</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
    <span class="s2">&quot;Compare and contrast the arts and culture of Houston and Boston.&quot;</span><span class="p">,</span>
    <span class="n">query_configs</span><span class="o">=</span><span class="n">query_configs</span><span class="p">,</span>
    <span class="n">service_context</span><span class="o">=</span><span class="n">service_context</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Asking Questions about specific Cities</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">response</span> <span class="o">=</span> <span class="n">outer_graph</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;What are the sports teams in Toronto?&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

</pre></div>
</div>
<p>This “outer” abstraction is able to handle different queries by routing to the right underlying abstractions.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../notebooks.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Notebooks</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="terms_definitions_tutorial.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">A Guide to Extracting Terms and Definitions</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Jerry Liu
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link" href="https://readthedocs.org/projects/gpt-index" aria-label="On Read the Docs">
                <svg x="0px" y="0px" viewBox="-125 217 360 360" xml:space="preserve">
                  <path fill="currentColor" d="M39.2,391.3c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3 c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2 c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,391.3,40.4,391.1,39.2,391.3z M39.2,353.6c-4.2,0.6-7.1,4.4-6.5,8.5 c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4 c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,353.6,40.4,353.4,39.2,353.6z M39.2,315.9 c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8 c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9 C41.7,315.9,40.4,315.8,39.2,315.9z M39.2,278.3c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7 c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6 c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,278.2,40.4,278.1,39.2,278.3z M-13.6,238.5c-39.6,0.3-54.3,12.5-54.3,12.5v295.7 c0,0,14.4-12.4,60.8-10.5s55.9,18.2,112.9,19.3s71.3-8.8,71.3-8.8l0.8-301.4c0,0-25.6,7.3-75.6,7.7c-49.9,0.4-61.9-12.7-107.7-14.2 C-8.2,238.6-10.9,238.5-13.6,238.5z M19.5,257.8c0,0,24,7.9,68.3,10.1c37.5,1.9,75-3.7,75-3.7v267.9c0,0-19,10-66.5,6.6 C59.5,536.1,19,522.1,19,522.1L19.5,257.8z M-3.6,264.8c4.2,0,7.7,3.4,7.7,7.7c0,4.2-3.4,7.7-7.7,7.7c0,0-12.4,0.1-20,0.8 c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,0,0,0,0c0,0,11.3-6,27-7.5 C-16,264.9-3.6,264.8-3.6,264.8z M-11,302.6c4.2-0.1,7.4,0,7.4,0c4.2,0.5,7.2,4.3,6.7,8.5c-0.4,3.5-3.2,6.3-6.7,6.7 c0,0-12.4,0.1-20,0.8c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,11.3-6,27-7.5 C-20.5,302.9-15.2,302.7-11,302.6z M-3.6,340.2c4.2,0,7.7,3.4,7.7,7.7s-3.4,7.7-7.7,7.7c0,0-12.4-0.1-20,0.7 c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,11.3-6,27-7.5C-16,340.1-3.6,340.2-3.6,340.2z" />
                </svg>
              </a><a class="muted-link" href="https://github.com/jerryjliu/gpt_index" aria-label="On GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
              </a>
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">A Guide to Creating a Unified Query Framework over your Indexes</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#defining-the-set-of-indexes">Defining the Set of Indexes</a></li>
<li><a class="reference internal" href="#defining-a-graph-for-compare-contrast-queries">Defining a Graph for Compare/Contrast Queries</a></li>
<li><a class="reference internal" href="#defining-the-unified-query-interface">Defining the Unified Query Interface</a></li>
<li><a class="reference internal" href="#querying-our-unified-interface">Querying our Unified Interface</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script async="async" src="/_/static/javascript/readthedocs-doc-embed.js"></script>
    <script src="../../_static/js/mendablesearch.js"></script>
    </body>
</html>